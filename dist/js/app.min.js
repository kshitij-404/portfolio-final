!function(n){"use strict";var t={$htmlBody:n("html, body"),$body:n("body"),$nav:n("#nav"),$navButton:n("#nav-button"),$onward:n("#onward"),$sections:n("#sections"),$section:n(".section"),$stat:n(".stat"),$timelineEvent:n(".timeline-event"),$lazy:n("img.lazy")},e={init:function(){e.backstretch(),e.jump(),e.stats(),e.navScroll(),e.navToggle(),e.timeline(),e.lazyImages()},backstretch:function(){n("#section-cover").backstretch("/images/cover-landscape.jpg"),n("#section-quotes").backstretch("/images/michaelpumo.jpg")},jump:function(){var n=t.$onward;n.off("click"),n.on("click",function(){var n=t.$section.eq(1).offset().top;return Modernizr.mq("only screen and (min-width: 768px)")&&(n=t.$section.eq(1).offset().top-t.$nav.height()),t.$htmlBody.animate({scrollTop:n},1e3,"easeInOutExpo"),!1})},stats:function(){var n=document.createElement("canvas");n.getContext&&t.$stat.circliful()},navScroll:function(){var e=t.$nav.find("a");e.off("click"),e.on("click",function(){var e=n(n.attr(this,"href")).offset().top;return Modernizr.mq("only screen and (min-width: 768px)")&&(e=n(n.attr(this,"href")).offset().top-(t.$nav.height()-1)),t.$htmlBody.animate({scrollTop:e},1e3,"easeInOutExpo",function(){t.$nav.removeClass("nav-open")}),!1})},navToggle:function(){t.$navButton.on("click",function(){return t.$nav.toggleClass("nav-open"),!1})},navHighlight:function(){t.$section.each(function(){var e=n(this).position();n(this).scrollspy({min:e.top-t.$nav.height(),max:e.top+(n(this).height()-t.$nav.height()),onEnter:function(n){t.$nav.find('a[href="#'+n.id+'"]').parent().addClass("current")},onLeave:function(n){t.$nav.find('a[href="#'+n.id+'"]').parent().removeClass("current")}})})},timeline:function(){if(!Modernizr.touch){var e=n.superscrollorama();t.$timelineEvent.each(function(t){var a=n(this);t%2===0?e.addTween(a,TweenMax.from(a,.4,{css:{opacity:0,left:"1500px"},ease:Quad.easeOut}),0,-200):e.addTween(a,TweenMax.from(a,.4,{css:{opacity:0,right:"1500px"},ease:Quad.easeOut}),0,-200)})}},lazyImages:function(){t.$lazy.lazyload({threshold:200,effect:"fadeIn"})}};e.init(),n(window).on("resize load",function(){e.navHighlight(),e.navScroll(),e.jump()})}(jQuery);